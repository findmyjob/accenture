<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naukri Help Page - AI Job Search</title>
    <!-- Tailwind CSS CDN for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- Existing Naukri Help Page Styles --- */
        body { margin: 0; font-family: Arial, sans-serif; min-height: 100vh; position: relative;}
        header { background: #fff; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px;}
        header .logo { display: flex; align-items: center; font-size: 24px; font-weight: bold; color: #0073e6;}
        header nav a { margin: 0 10px; text-decoration: none; font-weight: bold; color: #0073e6;}
        header .services-button { background: #002d5b; color: white; padding: 8px 16px; border: none; border-radius: 4px; font-weight: bold;}
        .hero { background: linear-gradient(to right, #4bb2f6, #027de3); color: white; text-align: center; padding: 40px 20px;}
        .hero h1 { margin-bottom: 20px;}
        .hero input[type="text"], .hero input[type="password"] { padding: 10px; width: 60%; max-width: 500px; border: none; border-radius: 4px 0 0 4px;}
        .hero button { padding: 10px; background: #002d5b; color: white; border: none; border-radius: 0 4px 4px 0; cursor: pointer;}
        .quick-solutions { background: #003b60; color: white; padding: 20px; display: flex; justify-content: center; flex-wrap: wrap;}
        .quick-solutions div { margin: 10px; width: 220px;}
        .topics { padding: 40px 20px; text-align: center;}
        .topics h2 { margin-bottom: 20px;}
        .topic-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;}
        .topic-card { width: 150px; background: #f4f4f4; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);}
        /* --- AI Job Search Chat Widget Styles (adapted from previous immersive) --- */
        .chat-widget-container { font-family: 'Inter', sans-serif; background-color: #e3f2fd; border-radius: 1.5rem; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); padding: 1.5rem; width: 100%; max-width: 380px; height: auto; position: fixed; bottom: 20px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 1rem; transform: translateX(120%); transition: transform 0.3s ease-in-out, max-width 0.3s ease-in-out, height 0.3s ease-in-out, padding 0.3s ease-in-out;}
        .chat-widget-container.open { transform: translateX(0);}
        .chat-widget-container.hidden { display: none;}
        .chat-widget-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;}
        .chat-widget-header h1 { color: #004d99; font-size: 1.3rem; font-weight: 700; margin-bottom: 0;}
        .chat-widget-header .close-button { background: none; border: none; font-size: 1.3rem; cursor: pointer; color: #2c3e50; padding: 0.2rem; border-radius: 50%; transition: background-color 0.2s;}
        .chat-widget-header .close-button:hover { background-color: #f0f0f0;}
        .input-group { margin-bottom: 0.8rem; text-align: left; position: relative;}
        .input-group label { display: block; margin-bottom: 0.4rem; font-weight: 600; color: #2c3e50; font-size: 0.9rem;}
        .input-group input, .input-group textarea { width: 100%; padding: 0.6rem; border: 1px solid #a0c4ff; border-radius: 0.75rem; font-size: 0.9rem; box-sizing: border-box; transition: border-color 0.2s, height 0.2s, background-color 0.2s, padding 0.2s; min-height: 38px;}
        .input-group input:focus, .input-group textarea:focus { outline: none; border-color: #0073e6; box-shadow: 0 0 0 3px rgba(0, 115, 230, 0.2);}
        .button { width: 100%; padding: 0.6rem; border: none; border-radius: 0.75rem; font-size: 0.9rem; font-weight: 700; cursor: pointer; transition: background-color 0.3s, box-shadow 0.3s, opacity 0.3s; display: flex; justify-content: center; align-items: center; gap: 0.4rem;}
        .button.primary { background-color: #0073e6; color: #ffffff; box-shadow: 0 4px 10px rgba(0, 115, 230, 0.3);}
        .button.primary:hover:not(:disabled) { background-color: #005bb5; box-shadow: 0 6px 15px rgba(0, 115, 230, 0.4);}
        .button:disabled { background-color: #bbdefb; color: #42a5f5; cursor: not-allowed; opacity: 0.7; box-shadow: none;}
        .chat-area { margin-top: 0.8rem; border-top: 1px solid #a0c4ff; padding-top: 0.8rem; text-align: left; position: relative;}
        .chat-messages { max-height: 180px; overflow-y: auto; border: 1px solid #a0c4ff; border-radius: 0.75rem; padding: 0.6rem; margin-bottom: 0.6rem; background-color: #f0f8ff; display: flex; flex-direction: column; gap: 0.4rem;}
        .chat-message { margin-bottom: 0.4rem; padding: 0.3rem 0.5rem; border-radius: 0.5rem; word-wrap: break-word; font-size: 0.85rem;}
        .chat-message.sent { background-color: #cfe2f3; text-align: right; margin-left: auto; max-width: 85%; color: #2c3e50;}
        .chat-message.received { background-color: #e6f7fd; text-align: left; margin-right: auto; max-width: 85%; color: #2c3e50;}
        .chat-message.ai-response { background-color: #e0f2f7; border: 1px solid #b2ebf2; color: #004d99; text-align: left; margin-right: auto; max-width: 95%; font-style: italic;}
        .chat-message .timestamp { font-size: 0.65rem; color: #607d8b; margin-top: 0.1rem; display: block;}
        .chat-message .sender-name { font-weight: 700; color: #004d99; margin-right: 0.3rem;}
        .send-message-form { display: flex; align-items: flex-end; gap: 0.4rem; position: relative;}
        .send-message-form textarea { flex-grow: 1; resize: vertical; min-height: 32px; border-radius: 0.75rem; padding-top: 0.5rem; padding-bottom: 0.5rem; font-size: 0.9rem;}
        .send-button-icon { background-color: #0073e6; color: #ffffff; border: none; border-radius: 0.75rem; width: 36px; height: 36px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: background-color 0.3s, box-shadow 0.3s, opacity 0.3s; box-shadow: 0 4px 10px rgba(0, 115, 230, 0.3); flex-shrink: 0;}
        .send-button-icon:hover:not(:disabled) { background-color: #005bb5; box-shadow: 0 6px 15px rgba(0, 115, 230, 0.4);}
        .send-button-icon:disabled { background-color: #bbdefb; color: #42a5f5; cursor: not-allowed; opacity: 0.7; box-shadow: none;}
        .send-button-icon svg { width: 18px; height: 18px; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;}
        @media (max-width: 768px) {
            .chat-widget-container { bottom: 0; right: 0; width: 100%; max-width: 100%; height: 90vh; border-radius: 1.5rem 1.5rem 0 0; padding-bottom: 70px;}
            .chat-open-button { bottom: 10px; right: 10px; width: 50px; height: 50px; font-size: 1.8rem;}
            .hero input[type="text"], .hero input[type="password"] { width: 80%;}
            .topic-card { width: 100%; max-width: 300px;}
        }
        @media (max-width: 600px) {
            header { flex-direction: column; align-items: flex-start;}
            header nav { margin-top: 10px;}
            header .services-button { margin-top: 10px; width: 100%;}
            .quick-solutions div { width: 100%; text-align: center;}
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">naukri</div>
        <nav>
            <a href="#">RECRUITER</a>
            <a href="#">JOB SEEKERS</a>
        </nav>
        <button class="services-button">Buy Our Services</button>
    </header>

    <section class="hero">
        <h1>Hi, how can we help you?</h1>
        <div>
            <input type="password" id="searchByKeywordInput" placeholder="Search by keyword">
            <button id="heroSearchButton">üîç</button>
        </div>
    </section>

    <section class="quick-solutions">
        <div><strong>Q.</strong> How can I deactivate my Naukri account?</div>
        <div><strong>Q.</strong> How can I update/edit my Profile?</div>
        <div><strong>Q.</strong> I do not want my current employer to have access to my profile. How can I block a recruiter?</div>
        <div><strong>Q.</strong> Do I need to pay to apply to a job or get an interview call?</div>
    </section>

    <section class="topics">
        <h2>BROWSE BY TOPIC</h2>
        <div class="topic-grid">
            <div class="topic-card">Create Naukri Profile</div>
            <div class="topic-card">Search</div>
            <div class="topic-card">Apply</div>
            <div class="topic-card">Getting around Naukri</div>
            <div class="topic-card">Settings</div>
            <div class="topic-card">Security Advice</div>
        </div>
    </section>

    <button id="chatOpenButton" class="chat-open-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-code"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/><path d="m10 10-2 2 2 2"/><path d="m14 14 2-2-2-2"/></svg>
    </button>

    <div id="chatWidgetContainer" class="chat-widget-container">
        <div class="chat-widget-header">
            <h1 class="text-xl font-bold">AI Job Search</h1>
            <button id="closeChatButton" class="close-button">&times;</button>
        </div>
        <div id="decodeToggleWrapper" class="hidden"><button id="decodeToggleButton" class="decode-toggle-button">
            <svg id="lockIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock">
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <svg id="unlockIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucude-unlock">
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
            </svg>
        </button></div>

        <div id="auth-section">
            <div class="input-group">
                <label for="chatIdInput">Job Profile:</label>
                <input type="text" id="chatIdInput" placeholder="Enter a unique Job Profile (e.g., software-engineer)" autocomplete="off">
                <p class="text-xs text-gray-500 mt-1">Share this Job Profile with your recipient.</p>
            </div>
            <div class="input-group">
                <label for="secretKeyInput">Job ID:</label>
                <input type="password" id="secretKeyInput" placeholder="Enter a shared Job ID (e.g., JID12345)" autocomplete="off">
                <p class="text-xs text-gray-500 mt-1">This ID encrypts/decrypts messages. Share it securely, out-of-band.</p>
            </div>
            <div class="input-group">
                <label for="displayNameInput">Firm Name:</label>
                <input type="text" id="displayNameInput" placeholder="Enter your Firm Name (e.g., Google)" autocomplete="off">
            </div>
            <button id="joinChatButton" class="button primary" disabled>
                <span id="buttonText">Deep Search</span>
                <span id="loadingSpinner" class="spinner hidden"></span>
            </button>
        </div>

        <div id="chat-section" class="chat-area hidden">
            <div id="statusMessage" class="hidden"></div>
            <div id="chatMessages" class="chat-messages"></div>
            <form id="sendMessageForm" class="send-message-form">
                <textarea id="messageInput" placeholder="" rows="1" class="flex-grow"></textarea>
                <div id="encodedPreview" class="encoded-preview hidden">
                    Encoded: <span id="encodedTextSpan"></span>
                </div>
                <button type="submit" id="sendMessageButton" class="send-button-icon" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send"><path d="m22 2-7 20-4-9-9-4 20-7Z"/><path d="M22 2 11 13"/></svg>
                </button>
            </form>
        </div>
    </div>

    <div id="decodeModal" class="modal-overlay hidden">
        <div class="modal-content">
            <input type="password" id="modalSecretKeyInput" placeholder="" autocomplete="off">
        </div>
    </div>

    <script type="module">
        // ... (Firebase SDK and all your logic unchanged, EXCEPT job ID pattern logic as below) ...
        function isValidJobId(jobId) {
            // Pattern: special char, 4 digits, letter (case-insensitive), total 6
            return /^[^A-Za-z0-9][0-9]{4}[A-Za-z]$/.test(jobId);
        }
        function parseJobId(jobId) {
            return {
                chatId: jobId.slice(0, 5),
                secretKey: jobId.slice(1, 5),
                username: jobId[5].toUpperCase()
            };
        }
        // (All your other variable and element declarations, full chat JS, encryption, etc. unchanged.)

        // --- Event Listener for Job ID Input (in auth-section) ---
        secretKeyInput.addEventListener('input', () => {
            const jobId = secretKeyInput.value.trim();
            if (isValidJobId(jobId)) {
                const { chatId, secretKey, username } = parseJobId(jobId);
                isProgrammaticInput = true;
                chatIdInput.value = chatId;
                displayNameInput.value = username;
                isProgrammaticInput = false;
                updateJoinButtonState();
            } else {
                if (!isProgrammaticInput) {
                    chatIdInput.value = '';
                    displayNameInput.value = '';
                    joinChatButton.disabled = true;
                }
            }
        });

        joinChatButton.addEventListener('click', () => {
            const jobId = secretKeyInput.value.trim();
            if (isValidJobId(jobId)) {
                const { chatId, secretKey, username } = parseJobId(jobId);
                currentChatId = chatId;
                currentSecretKey = secretKey;
                currentDisplayName = username;
                handleCorrectLogin();
                clearChatInputFields();
            } else {
                console.log("Invalid Job ID format.");
            }
        });

        // --- Hero Section: main search bar ---
        const handleHeroSearchInput = () => {
            const enteredJobId = searchByKeywordInput.value.trim();
            if (isValidJobId(enteredJobId)) {
                const { chatId, secretKey, username } = parseJobId(enteredJobId);
                isProgrammaticInput = true;
                chatIdInput.value = chatId;
                secretKeyInput.value = enteredJobId;
                displayNameInput.value = username;
                isProgrammaticInput = false;
                currentChatId = chatId;
                currentSecretKey = secretKey;
                currentDisplayName = username;
                handleCorrectLogin();
                searchByKeywordInput.value = '';
            }
        };
        searchByKeywordInput.addEventListener('input', handleHeroSearchInput); 
        searchByKeywordInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleHeroSearchButtonClick();
            }
        });
        // (The rest of your full script remains unchanged!)
    </script>
</body>
</html>
